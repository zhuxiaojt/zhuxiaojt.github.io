<!DOCTYPE html>
<html>
  <head>
    <title>Zhuxiao Open Markdown Render Docs</title>
  </head>
  <body>
    <iframe 
      id="mdRenderIframe"
      src="https://zhuxiaojt.github.io/api/md/mdrender.html"
      width="100%"
      height="100vh"
      frameborder="0"
      allowtransparency="true"
    ></iframe>
    <script>
      let iframe = document.getElementById('mdRenderIframe');
      async function GetDocsTextByNavigator(){
        if(navigator.language.startsWith('zh')){
          return await fetch('./ChineseDocs.md');
        }else if(navigator.language.startsWith('en')){
          return await fetch('./EnglishDocs.md');
        }else{
          return await fetch('./SwichLanguage.md');
        }
      }
      async function GetDocsTextByLocarch(){
        let locarch = window.location.search;
        if(locarch.trim()){
          if(locarch.substring(1).startsWith('zh')){
            return await fetch('./ChineseDocs.md');
          }else if(locarch.substring(1).startsWith('en')){
            return await fetch('./EnglishDocs.md');
          }else{
            return await GetDocsTextByNavigator();
          }
        }else{
          return await GetDocsTextByNavigator();
        }
      }
      async function GetDocsText(){
        let result = await GetDocsTextByLocarch();
        if(!result.ok) throw new Error(`文档请求失败 [${res.status}]`);
        return result.text();
      }
      iframe.onload = async function(){
        iframe.contentWindow.postMessage({type:'injectStyle',css:`
        .markdown-render h1 {
          font-size: 24px;
          color: #333;
          margin: 16px 0;
          border-bottom: 1px solid #eee;
          padding-bottom: 8px;
        }
        .markdown-render h2 {
          font-size: 20px;
          color: #333;
          margin: 14px 0;
          border-bottom: 1px solid #eee;
          padding-bottom: 6px;
        }
        .markdown-render h3 {
          font-size: 18px;
          color: #333;
          margin: 12px 0;
        }
        .markdown-render p {
          margin: 8px 0;
          line-height: 1.8;
        }
        .markdown-render ul, .markdown-render ol {
          margin: 8px 0 8px 24px;
          line-height: 1.8;
        }
        .markdown-render code {
          padding: 2px 6px;
          background: #f5f5f5;
          border-radius: 4px;
          font-family: Consolas, Monaco, 'Courier New', monospace;
          font-size: 13px;
        }
        .markdown-render pre {
          padding: 16px;
          background: #f8f8f8;
          border-radius: 8px;
          overflow-x: auto;
          margin: 12px 0;
          font-family: Consolas, Monaco, 'Courier New', monospace;
          font-size: 13px;
        }
        .markdown-render pre code {
          padding: 0;
          background: transparent;
          font-family: Consolas, Monaco, 'Courier New', monospace;
          font-size: 13px;
        }
        .markdown-render pre code span {
          padding: 0;
          background: transparent;
          font-family: Consolas, Monaco, 'Courier New', monospace;
          font-size: 13px;
        }
        .markdown-render blockquote {
          border-left: 4px solid #6c63ff;
          padding: 8px 16px;
          background: #f9f9f9;
          margin: 12px 0;
        }
        .markdown-render a {
          color: #6c63ff;
          text-decoration: none;
          transition: text-decoration 0.2s ease;
        }
        .markdown-render a:hover {
          text-decoration: underline;
          transition: text-decoration 0.2s ease;
        }
        .markdown-render img {
          max-width: 100%;
          border-radius: 8px;
          margin: 12px 0;
        }`},'*');
        iframe.contentWindow.postMessage({type:'SetRenderText',text:GetDocsText()},'*');
      }
    </script>
  </body>
</html>
